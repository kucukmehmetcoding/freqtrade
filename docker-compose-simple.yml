services:
  app:
    image: freqtradeorg/freqtrade:stable
    restart: unless-stopped
    volumes:
      - freqtrade_data:/freqtrade/user_data
    environment:
      # Trading mode
      - DRY_RUN=${DRY_RUN:-true}
      - MAX_OPEN_TRADES=${MAX_OPEN_TRADES:-3}
      - STAKE_AMOUNT=${STAKE_AMOUNT:-100}

      # Binance API (will be overridden by environment variables)
      - BINANCE_API_KEY=${BINANCE_API_KEY}
      - BINANCE_SECRET=${BINANCE_SECRET}

      # Web UI Authentication
      - API_USERNAME=${API_USERNAME:-admin}
      - API_PASSWORD=${API_PASSWORD:-freqtrade}
      - JWT_SECRET=${JWT_SECRET:-super-secret}
    expose:
      - "8089"
    command: ["trade", "--config", "/freqtrade/config.json", "--api-server", "--listen-ip-address", "0.0.0.0", "--listen-port", "8089"]
    healthcheck:
      disable: true

volumes:
  freqtrade_data: